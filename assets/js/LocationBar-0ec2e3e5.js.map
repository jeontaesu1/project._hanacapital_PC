{"version":3,"file":"LocationBar-0ec2e3e5.js","sources":["../../../../src/components/ui/layout/LocationBar.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  computed,\n  onMounted,\n  onUpdated,\n  onBeforeUnmount,\n  onUnmounted,\n} from 'vue';\nimport { RouterLink } from 'vue-router';\n\nimport { useUiCommonStore } from '@/stores/ui/common';\nimport { useUiScrollBlockStore } from '@/stores/ui/scrollBlock';\nimport { useUiHeaderStore } from '@/stores/ui/header';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  list: '',\n  item: '',\n  link: '',\n  text: '',\n});\n\nexport default {\n  components: {\n    RouterLink,\n  },\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    data: {\n      Type: Array,\n      default() {\n        return [\n          {\n            text: 'í™ˆ',\n            to: '/main/home',\n          },\n        ];\n      },\n    },\n  },\n  setup(props) {\n    const store = {\n      ui: {\n        common: useUiCommonStore(),\n        scrollBlock: useUiScrollBlockStore(),\n        header: useUiHeaderStore(),\n      },\n    };\n\n    const location = ref(null);\n    const fixbar = ref(null);\n    const fake = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const isBlocking = computed(() => {\n      return store.ui.scrollBlock.isBlocking;\n    });\n\n    const scrollbarsWidth = computed(() => {\n      return store.ui.common.scrollbarsWidth;\n    });\n\n    const blockingScrollLeft = computed(() => {\n      return store.ui.scrollBlock.scrollLeft;\n    });\n\n    const update = () => {\n      if (fixbar.value && fake.value) {\n        const height = fixbar.value.offsetHeight;\n        fake.value.style.height = `${height}px`;\n        store.ui.header.setLocationHeight(height);\n      }\n    };\n\n    const scroll = () => {\n      const html = document.getElementsByTagName('html')[0];\n\n      if (html && location.value) {\n        if (isBlocking.value) {\n          location.value.style.marginLeft = `-${blockingScrollLeft.value}px`;\n        } else {\n          location.value.style.marginLeft = `-${html.scrollLeft}px`;\n        }\n      }\n    };\n\n    const resize = () => {\n      scroll();\n      update();\n    };\n\n    const load = () => {\n      resize();\n    };\n\n    onMounted(() => {\n      update();\n\n      window.addEventListener('load', load);\n      window.addEventListener('scroll', scroll);\n      window.addEventListener('resize', resize);\n    });\n\n    onUpdated(() => {\n      update();\n    });\n\n    onBeforeUnmount(() => {\n      store.ui.header.setLocationHeight(0);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener('load', load);\n      window.removeEventListener('scroll', scroll);\n      window.removeEventListener('resize', resize);\n    });\n\n    return {\n      store,\n      location,\n      fixbar,\n      fake,\n      customClassNames,\n      isBlocking,\n      scrollbarsWidth,\n    };\n  },\n};\n</script>\n\n<template>\n  <div :class=\"$style['location-wrap']\">\n    <div\n      ref=\"fixbar\"\n      :class=\"$style['location-wrap__fix']\"\n      :style=\"`top: ${store.ui.header.height}px; ${\n        isBlocking ? `margin-right: ${scrollbarsWidth}px` : ''\n      }`\"\n    >\n      <div ref=\"location\" :class=\"[$style['location'], customClassNames.wrap]\">\n        <p :class=\"[$style['location__list'], customClassNames.list]\">\n          <span\n            v-for=\"(item, i) in data\"\n            :key=\"i\"\n            :class=\"[$style['location__item'], customClassNames.item]\"\n          >\n            <RouterLink\n              v-if=\"item.to\"\n              :to=\"item.to\"\n              :class=\"[$style['location__link'], customClassNames.link]\"\n            >\n              <span\n                :class=\"[$style['location__text'], customClassNames.text]\"\n                >{{ item.text }}</span\n              >\n            </RouterLink>\n            <span\n              v-else\n              :class=\"[$style['location__text'], customClassNames.text]\"\n              >{{ item.text }}</span\n            >\n          </span>\n        </p>\n      </div>\n    </div>\n\n    <div ref=\"fake\" :class=\"$style['location-wrap__fake']\"></div>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/layout/LocationBar.scss';\n</style>\n"],"names":["defaultClassNames","_sfc_main","RouterLink","props","store","useUiCommonStore","useUiScrollBlockStore","useUiHeaderStore","location","ref","fixbar","fake","customClassNames","computed","classNames","isBlocking","scrollbarsWidth","blockingScrollLeft","update","height","scroll","html","resize","load","onMounted","onUpdated","onBeforeUnmount","onUnmounted","_createElementBlock","_ctx","_createElementVNode","$setup","_normalizeClass","_openBlock","_Fragment","_renderList","$props","item","i","_createBlock","_component_RouterLink","_toDisplayString"],"mappings":"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"}