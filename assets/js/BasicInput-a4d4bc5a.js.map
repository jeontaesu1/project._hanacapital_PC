{"version":3,"file":"BasicInput-a4d4bc5a.js","sources":["../../../../src/components/ui/form/BasicInput.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  reactive,\n  computed,\n  onBeforeMount,\n  watch,\n  inject,\n  nextTick,\n} from 'vue';\n\nimport IconDelete from '@/assets/images/icon/text-delete.svg?component';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  cell: '',\n  input: '',\n  delete: '',\n  deleteText: '',\n});\n\nexport default {\n  components: {\n    IconDelete,\n  },\n  inheritAttrs: false,\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    type: {\n      Type: String,\n      default: 'text',\n    },\n    maxLength: {\n      Type: Number,\n      default: null,\n    },\n    onDelete: {\n      Type: Function,\n      default() {\n        return () => {};\n      },\n    },\n    useDelete: {\n      Type: Boolean,\n      default: true,\n    },\n    readonly: {\n      Type: Boolean,\n      default: false,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n    align: {\n      Type: String,\n      default: null,\n    },\n    defaultValue: {\n      Type: String,\n      default: null,\n    },\n    modelValue: {\n      Type: String,\n    },\n  },\n  setup(props, { emit }) {\n    let timer = null;\n\n    const state = reactive({\n      isFocus: false,\n      isInputed: false,\n      val: '',\n    });\n\n    const formListItem = inject('formListItem', {});\n\n    const input = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const getInputElement = () => {\n      return input.value;\n    };\n\n    const focus = () => {\n      input.value.focus();\n    };\n\n    const deleteAction = () => {\n      const { onDelete } = props;\n      input.value.value = '';\n      input.value.focus();\n      onDelete();\n\n      const eInput = new Event('input');\n      input.value.dispatchEvent(eInput);\n    };\n\n    const onfocusin = () => {\n      clearTimeout(timer);\n      state.isFocus = true;\n      state.isInputed = input.value.value.length ? true : false;\n    };\n\n    const onfocusout = () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        state.isFocus = false;\n        clearTimeout(timer);\n      }, 50);\n    };\n\n    const onInput = (e) => {\n      const { value } = e.target;\n      const { maxLength } = props;\n      const val =\n        maxLength === null ? value : value.substr(0, Number(maxLength));\n\n      e.target.value = val;\n      state.val = val;\n      emit('update:modelValue', val);\n    };\n\n    const onKeyup = (e) => {\n      state.isInputed = e.target.value.length ? true : false;\n    };\n\n    onBeforeMount(() => {\n      state.val = props.modelValue || props.defaultValue || '';\n    });\n\n    watch(\n      () => props.modelValue,\n      (cur) => {\n        state.val = cur;\n\n        nextTick(() => {\n          if (formListItem && formListItem.checkInputed) {\n            formListItem.checkInputed();\n          }\n        });\n      }\n    );\n\n    return {\n      state,\n      input,\n      customClassNames,\n      getInputElement,\n      focus,\n      deleteAction,\n      onfocusin,\n      onInput,\n      onKeyup,\n      onfocusout,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['input'],\n      {\n        [$style['input--focus']]: state.isFocus,\n        [$style['input--inputed']]: state.isInputed,\n      },\n      customClassNames.wrap,\n    ]\"\n    @focusin=\"onfocusin\"\n    @focusout=\"onfocusout\"\n  >\n    <div :class=\"[$style['input__cell'], customClassNames.cell]\">\n      <input\n        ref=\"input\"\n        v-bind=\"$attrs\"\n        :type=\"type\"\n        :class=\"[\n          $style['input__input'],\n          {\n            [$style[`input__input--align-${align}`]]: align,\n          },\n          customClassNames.input,\n        ]\"\n        :value=\"modelValue || state.val\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        @input=\"onInput\"\n        @keyup=\"onKeyup\"\n      />\n    </div>\n    <button\n      type=\"button\"\n      v-if=\"!disabled && !readonly && useDelete\"\n      :class=\"[$style['input__delete'], customClassNames.delete]\"\n      @click=\"deleteAction\"\n    >\n      <IconDelete />\n      <span :class=\"[$style['input__delete-text'], customClassNames.deleteText]\"\n        >입력 내용 지우기</span\n      >\n    </button>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/form/BasicInput.scss';\n</style>\n"],"names":["defaultClassNames","_sfc_main","IconDelete","props","emit","timer","state","reactive","formListItem","inject","input","ref","customClassNames","computed","classNames","getInputElement","focus","deleteAction","onDelete","eInput","onfocusin","onfocusout","onInput","e","value","maxLength","val","onKeyup","onBeforeMount","watch","cur","nextTick","_createElementBlock","_normalizeClass","_ctx","$setup","args","_createElementVNode","_mergeProps","$props","_createVNode","_component_IconDelete"],"mappings":"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"}