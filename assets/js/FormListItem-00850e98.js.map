{"version":3,"file":"FormListItem-00850e98.js","sources":["../../../../src/components/ui/form/FormList.vue","../../../../src/components/ui/form/FormListItem.vue"],"sourcesContent":["<script>\nimport { computed, useCssModule, provide } from 'vue';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  list: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    wrap: {\n      Type: Boolean,\n      default: false,\n    },\n    col: {\n      Type: Number,\n      default: 2,\n    },\n  },\n  setup(props) {\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    provide('formListStyleModule', useCssModule());\n\n    return {\n      customClassNames,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['form'],\n      {\n        [$style['form--wrap']]: wrap,\n        [$style[`form--col-${col}`]]: wrap && col > 2,\n      },\n      customClassNames.wrap,\n    ]\"\n  >\n    <dl :class=\"[$style['form__list'], customClassNames.list]\">\n      <slot />\n    </dl>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/form/FormList.scss';\n</style>\n","<script>\nimport {\n  ref,\n  computed,\n  reactive,\n  provide,\n  inject,\n  onBeforeMount,\n  onMounted,\n  onUpdated,\n  watch,\n} from 'vue';\n\nconst defaultClassNames = () => ({\n  item: '',\n  title: '',\n  titleText: '',\n  titleOptionalText: '',\n  require: '',\n  requireText: '',\n  contents: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    require: {\n      Type: Boolean,\n      default: false,\n    },\n    forceFocus: {\n      Type: Boolean,\n      default: false,\n    },\n    titleText: {\n      Type: String,\n      default: '',\n    },\n    titleOptionalText: {\n      Type: String,\n      default: null,\n    },\n    target: {\n      Type: String,\n      default: null,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n    selectOnly: {\n      Type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const styleModule = inject('formListStyleModule');\n\n    let timer = null;\n\n    const state = reactive({\n      isFocus: false,\n      isSelectFocus: false,\n      isInputed: false,\n      isError: false,\n      selectOnly: {\n        value: false,\n      },\n    });\n\n    const areaClass = styleModule['form__area'];\n\n    const contents = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const checkInputed = () => {\n      const inputs = contents.value.querySelectorAll(\n        `.${areaClass} input:not(.js-ignore):not([type=\"checkbox\"]):not([type=\"radio\"]):not([type=\"button\"]):not([type=\"image\"])`\n      );\n      let isInputed = false;\n\n      for (let i = 0; i < inputs.length; i++) {\n        if (inputs[i].value.length) {\n          isInputed = true;\n          break;\n        }\n      }\n\n      state.isInputed = isInputed;\n    };\n\n    const onfocusin = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      clearTimeout(timer);\n      state.isFocus = true;\n\n      checkInputed();\n    };\n\n    const onfocusout = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        state.isFocus = false;\n        clearTimeout(timer);\n      }, 50);\n    };\n\n    const onKeyup = () => {\n      const { disabled } = props;\n\n      if (disabled) return;\n\n      checkInputed();\n    };\n\n    const labelClick = () => {\n      const { target, disabled } = props;\n\n      if (disabled || !target) return;\n\n      const el = contents.value.querySelector(target);\n\n      el.focus();\n\n      if (el.matches('button, a')) {\n        el.click();\n      }\n    };\n\n    const error = (val) => {\n      state.isError = val;\n    };\n\n    const selectFocus = (val) => {\n      state.isSelectFocus = val;\n    };\n\n    onBeforeMount(() => {\n      state.selectOnly.value = props.selectOnly;\n    });\n\n    onMounted(() => {\n      checkInputed();\n    });\n\n    onUpdated(() => {\n      checkInputed();\n    });\n\n    watch(\n      () => props.selectOnly,\n      (cur) => {\n        state.selectOnly.value = cur;\n      }\n    );\n\n    provide('formListItem', {\n      areaClass,\n      onfocusin,\n      onfocusout,\n      error,\n      selectFocus,\n      helpClass: styleModule['form__help'],\n      selectOnly: state.selectOnly,\n      checkInputed,\n    });\n\n    return {\n      state,\n      styleModule,\n      contents,\n      customClassNames,\n      onfocusin,\n      onfocusout,\n      onKeyup,\n      labelClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      styleModule['form__item'],\n      {\n        [styleModule['form__item--focus']]:\n          state.isFocus || state.isSelectFocus,\n        [styleModule['form__item--inputed']]: state.isInputed,\n        [styleModule['form__item--force-focus']]: forceFocus,\n        [styleModule['form__item--error']]: state.isError,\n        [styleModule['form__item--disabled']]: disabled,\n        [styleModule['form__item--select-only']]: selectOnly,\n      },\n      customClassNames.item,\n    ]\"\n  >\n    <dt\n      :class=\"[styleModule['form__title'], customClassNames.title]\"\n      @click=\"labelClick\"\n    >\n      <span\n        :class=\"[styleModule['form__title-text'], customClassNames.titleText]\"\n      >\n        {{ titleText }}\n      </span>\n      <span\n        v-if=\"titleOptionalText\"\n        :class=\"[\n          styleModule['form__title-optional'],\n          customClassNames.titleOptionalText,\n        ]\"\n      >\n        {{ titleOptionalText }}\n      </span>\n      <span\n        v-if=\"require\"\n        :class=\"[styleModule['form__require'], customClassNames.require]\"\n      >\n        <span\n          :class=\"[\n            styleModule['form__require-text'],\n            customClassNames.requireText,\n          ]\"\n        >\n          (필수)\n        </span>\n      </span>\n    </dt>\n    <dd\n      ref=\"contents\"\n      :class=\"[styleModule['form__contents'], customClassNames.contents]\"\n      @keyup=\"onKeyup\"\n    >\n      <slot />\n    </dd>\n  </div>\n</template>\n"],"names":["defaultClassNames","_sfc_main","props","customClassNames","computed","classNames","provide","useCssModule","_createElementBlock","_normalizeClass","_ctx","$props","$setup","_createElementVNode","_renderSlot","styleModule","inject","timer","state","reactive","areaClass","contents","ref","checkInputed","inputs","isInputed","i","onfocusin","disabled","onfocusout","onKeyup","labelClick","target","el","error","val","selectFocus","onBeforeMount","onMounted","onUpdated","watch","cur","args"],"mappings":"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"}