{"version":3,"file":"AlertSystem-3231da05.js","sources":["../../../../src/components/ui/layer/AlertSystem.vue"],"sourcesContent":["<script>\nimport { reactive, ref, nextTick } from 'vue';\n\nimport BasicButton from '@/components/ui/button/BasicButton.vue';\nimport ButtonList from '@/components/ui/button/ButtonList.vue';\nimport ButtonListItem from '@/components/ui/button/ButtonListItem.vue';\nimport UiLayer from '@/components/ui/layer/UiLayer.vue';\nimport PopupTitle from '@/components/ui/layer/PopupTitle.vue';\nimport PopupText from '@/components/ui/layer/PopupText.vue';\nimport AlertPopup from '@/components/ui/layer/AlertPopup.vue';\n\nconst defaultOptions = () => ({\n  title: '',\n  message: [''],\n  buttons: [{}],\n  speed: null,\n});\nconst defaultButtonsOptions = () => ({\n  text: '확인',\n  theme: null, // secondary, tertiary, quaternary\n  line: false, // true\n  callback: (closeFn) => {\n    closeFn();\n  },\n  closeAfterCallback: () => {},\n});\n\nexport default {\n  components: {\n    BasicButton,\n    UiLayer,\n    PopupTitle,\n    PopupText,\n    AlertPopup,\n    ButtonList,\n    ButtonListItem,\n  },\n  setup() {\n    const initOptions = defaultOptions();\n\n    const state = reactive({\n      title: initOptions.title,\n      message: initOptions.message,\n      buttons: [defaultButtonsOptions()],\n      onAfterClosed: () => {},\n    });\n\n    const layer = ref(null);\n\n    const open = (customOptions) => {\n      const options = Object.assign(defaultOptions(), customOptions);\n      const { title, message, buttons, speed } = options;\n\n      for (let i = 0; i < buttons.length; i++) {\n        buttons[i] = Object.assign(defaultButtonsOptions(), buttons[i]);\n      }\n\n      state.title = title;\n      state.message =\n        typeof message === 'string' ? message.split(/\\n/) : message;\n      state.buttons = buttons;\n\n      layer.value.open(null, speed);\n    };\n\n    const close = (speed) => {\n      layer.value.close(speed);\n    };\n\n    const clear = () => {\n      layer.value.close(0);\n    };\n\n    const buttonClick = (i) => {\n      const { buttons } = state;\n\n      state.onAfterClosed = () => {\n        const resetOptions = defaultOptions();\n\n        buttons[i].closeAfterCallback();\n\n        state.title = resetOptions.title;\n        state.message = resetOptions.message;\n        state.buttons = [defaultButtonsOptions()];\n      };\n\n      nextTick(() => {\n        buttons[i].callback(close);\n      });\n    };\n\n    return {\n      state,\n      layer,\n      open,\n      close,\n      clear,\n      buttonClick,\n    };\n  },\n};\n</script>\n\n<template>\n  <UiLayer ref=\"layer\" :onAfterClosed=\"state.onAfterClosed\">\n    <AlertPopup>\n      <template v-slot:head>\n        <PopupTitle v-if=\"state.title.length\">{{ state.title }}</PopupTitle>\n      </template>\n\n      <PopupText v-if=\"state.message[0].length\">\n        <template v-for=\"(text, i) in state.message\" :key=\"i\">\n          <br v-if=\"i > 0\" />{{ text }}\n        </template>\n      </PopupText>\n\n      <template v-slot:foot>\n        <ButtonList\n          :classNames=\"{\n            wrap: 'row-margin-none',\n          }\"\n        >\n          <ButtonListItem v-for=\"(item, i) in state.buttons\" :key=\"i\">\n            <BasicButton\n              size=\"regular\"\n              :line=\"item.line\"\n              :theme=\"item.theme\"\n              @click=\"buttonClick(i)\"\n            >\n              {{ item.text }}\n            </BasicButton>\n          </ButtonListItem>\n        </ButtonList>\n      </template>\n    </AlertPopup>\n  </UiLayer>\n</template>\n"],"names":["defaultOptions","defaultButtonsOptions","closeFn","_sfc_main","BasicButton","UiLayer","PopupTitle","PopupText","AlertPopup","ButtonList","ButtonListItem","initOptions","state","reactive","layer","ref","open","customOptions","options","title","message","buttons","speed","i","close","resetOptions","nextTick","_createBlock","_component_UiLayer","$setup","_createVNode","_component_AlertPopup","_component_PopupTitle","_createTextVNode","_toDisplayString","_component_ButtonList","_openBlock","_createElementBlock","_Fragment","item","_component_ButtonListItem","_component_BasicButton","$event","_component_PopupText","text","_hoisted_1"],"mappings":"0ZAWA,MAAMA,EAAiB,KAAO,CAC5B,MAAO,GACP,QAAS,CAAC,EAAE,EACZ,QAAS,CAAC,CAAA,CAAE,EACZ,MAAO,IACT,GACMC,EAAwB,KAAO,CACnC,KAAM,KACN,MAAO,KACP,KAAM,GACN,SAAWC,GAAY,CACrBA,GACD,EACD,mBAAoB,IAAM,CAAE,CAC9B,GAEKC,EAAU,CACb,WAAY,CACV,YAAAC,EACA,QAAAC,EACA,WAAAC,EACA,UAAAC,EACA,WAAAC,EACA,WAAAC,EACA,eAAAC,CACD,EACD,OAAQ,CACN,MAAMC,EAAcX,IAEdY,EAAQC,EAAS,CACrB,MAAOF,EAAY,MACnB,QAASA,EAAY,QACrB,QAAS,CAACV,GAAuB,EACjC,cAAe,IAAM,CAAE,CACzB,CAAC,EAEKa,EAAQC,EAAI,IAAI,EAEhBC,EAAQC,GAAkB,CAC9B,MAAMC,EAAU,OAAO,OAAOlB,EAAgB,EAAEiB,CAAa,EACvD,CAAE,MAAAE,EAAO,QAAAC,EAAS,QAAAC,EAAS,MAAAC,CAAM,EAAIJ,EAE3C,QAASK,EAAI,EAAGA,EAAIF,EAAQ,OAAQE,IAClCF,EAAQE,CAAC,EAAI,OAAO,OAAOtB,IAAyBoB,EAAQE,CAAC,CAAC,EAGhEX,EAAM,MAAQO,EACdP,EAAM,QACJ,OAAOQ,GAAY,SAAWA,EAAQ,MAAM,IAAI,EAAIA,EACtDR,EAAM,QAAUS,EAEhBP,EAAM,MAAM,KAAK,KAAMQ,CAAK,GAGxBE,EAASF,GAAU,CACvBR,EAAM,MAAM,MAAMQ,CAAK,GAyBzB,MAAO,CACL,MAAAV,EACA,MAAAE,EACA,KAAAE,EACA,MAAAQ,EACA,MA3BY,IAAM,CAClBV,EAAM,MAAM,MAAM,CAAC,GA2BnB,YAxBmBS,GAAM,CACzB,KAAM,CAAE,QAAAF,CAAU,EAAET,EAEpBA,EAAM,cAAgB,IAAM,CAC1B,MAAMa,EAAezB,IAErBqB,EAAQE,CAAC,EAAE,qBAEXX,EAAM,MAAQa,EAAa,MAC3Bb,EAAM,QAAUa,EAAa,QAC7Bb,EAAM,QAAU,CAACX,EAAqB,CAAE,GAG1CyB,EAAS,IAAM,CACbL,EAAQE,CAAC,EAAE,SAASC,CAAK,CAC3B,CAAC,GAWJ,CACH,oLAIEG,EA+BUC,EAAA,CA/BD,IAAI,QAAS,cAAeC,EAAK,MAAC,0BACzC,IA6Ba,CA7BbC,EA6BaC,EAAA,KAAA,CA5BM,OACf,IAAoE,CAAlDF,EAAK,MAAC,MAAM,YAA9BF,EAAoEK,EAAA,CAAA,IAAA,CAAA,EAAA,WAA9B,IAAiB,CAAdC,EAAAC,EAAAL,EAAA,MAAM,KAAK,EAAA,CAAA,sBASrC,OACf,IAea,CAfbC,EAeaK,EAAA,CAdV,WAAY,uBAEZ,GAAA,WAEe,IAAkC,EAAlDC,EAAA,EAAA,EAAAC,EASiBC,SATmBT,EAAK,MAAC,QAAlB,CAAAU,EAAMhB,SAA9BI,EASiBa,EAAA,CATmC,IAAKjB,GAAC,WACxD,IAOc,CAPdO,EAOcW,EAAA,CANZ,KAAK,UACJ,KAAMF,EAAK,KACX,MAAOA,EAAK,MACZ,QAAKG,GAAEb,EAAW,YAACN,CAAC,cAErB,IAAe,CAAZU,EAAAC,EAAAK,EAAK,IAAI,EAAA,CAAA,mFAnBpB,IAIY,CAJKV,EAAK,MAAC,QAAO,CAAA,EAAI,YAAlCF,EAIYgB,EAAA,CAAA,IAAA,CAAA,EAAA,WAHA,IAAkC,EAA5CP,EAAA,EAAA,EAAAC,EAEWC,SAFmBT,EAAK,MAAC,QAAlB,CAAAe,EAAMrB,kBAA2BA,GAAC,CACxCA,EAAC,OAAXc,EAAmB,KAAAQ,CAAA,gBAAGD,CAAI,EAAA,CAAA"}