{"version":3,"file":"UiTabPanel-c1840929.js","sources":["../../../../src/components/ui/tab/UiTab.vue","../../../../src/components/ui/tab/UiTabPanel.vue"],"sourcesContent":["<script>\nimport {\n  reactive,\n  computed,\n  useCssModule,\n  provide,\n  nextTick,\n  onMounted,\n} from 'vue';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    initialOpen: {\n      Type: String,\n      default: null,\n    },\n    type: {\n      Type: String,\n      default: null,\n    },\n    onChange: {\n      Type: Function,\n      default() {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const state = reactive({\n      activeName: {\n        value: null,\n      },\n      buttons: [],\n    });\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const buttonsAdd = (obj) => {\n      const i = state.buttons.findIndex((item) => item.key === obj.key);\n      if (i >= 0) return;\n      state.buttons.push(Object.assign({}, obj));\n    };\n\n    const buttonsRemove = (key) => {\n      const i = state.buttons.findIndex((item) => item.key === key);\n      state.buttons.splice(i, 1);\n    };\n\n    const buttonsUpdate = (key, obj) => {\n      const i = state.buttons.findIndex((item) => item.key === key);\n      const testKey = (() => {\n        if (!obj.key) return true;\n\n        if (typeof obj.key === 'string' && !obj.key.length) return false;\n\n        const i = state.buttons.findIndex((item) => item.key === obj.key);\n\n        if (i === -1) {\n          return true;\n        } else {\n          return false;\n        }\n      })();\n\n      if (testKey) {\n        Object.assign(state.buttons[i], obj);\n      }\n    };\n\n    const getButton = (key) => {\n      const i = state.buttons.findIndex((item) => item.key === key);\n      return state.buttons[i];\n    };\n\n    const open = (key, isFocus = true) => {\n      const { onChange } = props;\n\n      state.activeName.value = key;\n\n      nextTick(() => {\n        const button = getButton(key);\n        button.open(isFocus);\n        onChange();\n      });\n    };\n\n    const prev = () => {\n      const key = state.activeName.value;\n      const aliveButtons = state.buttons.filter((item) => !item.disabled);\n      const i = aliveButtons.findIndex((item) => item.key === key);\n      const prevIndex = (() => {\n        const result = i - 1;\n\n        if (result < 0) {\n          return aliveButtons.length - 1;\n        } else {\n          return result;\n        }\n      })();\n\n      open(aliveButtons[prevIndex].key);\n    };\n\n    const next = () => {\n      const key = state.activeName.value;\n      const aliveButtons = state.buttons.filter((item) => !item.disabled);\n      const i = aliveButtons.findIndex((item) => item.key === key);\n      const nextIndex = (() => {\n        const result = i + 1;\n\n        if (result >= aliveButtons.length) {\n          return 0;\n        } else {\n          return result;\n        }\n      })();\n\n      open(aliveButtons[nextIndex].key);\n    };\n\n    const start = () => {\n      const aliveButtons = state.buttons.filter((item) => !item.disabled);\n      open(aliveButtons[0].key);\n    };\n\n    const end = () => {\n      const aliveButtons = state.buttons.filter((item) => !item.disabled);\n      open(aliveButtons[aliveButtons.length - 1].key);\n    };\n\n    onMounted(() => {\n      if (props.initialOpen) {\n        open(props.initialOpen, false);\n      } else {\n        if (state.buttons.length) {\n          open(state.buttons[0].key, false);\n        }\n      }\n    });\n\n    provide('uiTabStyleModule', useCssModule());\n    provide('uiTab', {\n      activeName: state.activeName,\n      buttonsAdd,\n      buttonsRemove,\n      buttonsUpdate,\n      open,\n      prev,\n      next,\n      start,\n      end,\n    });\n\n    return {\n      state,\n      customClassNames,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['tab'],\n      {\n        [$style[`tab--type-${type}`]]: type,\n      },\n      customClassNames.wrap,\n    ]\"\n  >\n    <slot :activeName=\"state.activeName.value\" />\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/tab/UiTab.scss';\n</style>\n","<script>\nimport { computed, inject } from 'vue';\n\nconst defaultClassNames = () => ({\n  panel: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    name: {\n      Type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const styleModule = inject('uiTabStyleModule');\n    const uiTab = inject('uiTab', {});\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    return {\n      styleModule,\n      customClassNames,\n      uiTab,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      styleModule['tab__panel'],\n      {\n        'is-tab-opened': uiTab.activeName.value === name,\n      },\n      customClassNames.panel,\n    ]\"\n    role=\"tabpanel\"\n    :hidden=\"uiTab.activeName.value === name ? false : true\"\n    :aria-labelledby=\"`${name}_tab`\"\n    :id=\"`${name}_panel`\"\n  >\n    <slot />\n  </div>\n</template>\n"],"names":["defaultClassNames","_sfc_main","props","state","reactive","customClassNames","computed","classNames","buttonsAdd","obj","item","buttonsRemove","key","i","buttonsUpdate","getButton","open","isFocus","onChange","nextTick","prev","aliveButtons","prevIndex","result","next","nextIndex","start","end","onMounted","provide","useCssModule","_createElementBlock","_normalizeClass","_ctx","$props","$setup","_renderSlot","styleModule","inject","uiTab"],"mappings":"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"}