{"version":3,"file":"BasicTextarea-e1f8d598.js","sources":["../../../../src/components/ui/form/BasicTextarea.vue"],"sourcesContent":["<script>\nimport {\n  ref,\n  reactive,\n  computed,\n  inject,\n  provide,\n  onBeforeMount,\n  onMounted,\n  onUpdated,\n  useCssModule,\n  watch,\n  nextTick,\n} from 'vue';\n\nimport FormInvalid from '@/components/ui/form/FormInvalid.vue';\n\nconst defaultClassNames = () => ({\n  item: '',\n  title: '',\n  titleText: '',\n  titleOptionalText: '',\n  require: '',\n  requireText: '',\n  contents: '',\n  input: '',\n  bottom: '',\n  bottomLeft: '',\n  count: '',\n  countCurrent: '',\n});\n\nexport default {\n  components: {\n    FormInvalid,\n  },\n  inheritAttrs: false,\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    require: {\n      Type: Boolean,\n      default: false,\n    },\n    titleText: {\n      Type: String,\n      default: '',\n    },\n    titleOptionalText: {\n      Type: String,\n      default: null,\n    },\n    disabled: {\n      Type: Boolean,\n      default: false,\n    },\n    count: {\n      Type: Boolean,\n      default: false,\n    },\n    error: {\n      Type: Boolean,\n      default: false,\n    },\n    maxlength: {\n      Type: Number,\n      default: null,\n    },\n    defaultValue: {\n      Type: String,\n      default: null,\n    },\n    modelValue: {\n      Type: String,\n    },\n  },\n  setup(props, context) {\n    const { emit } = context;\n    let timer = null;\n\n    const $style = useCssModule();\n    const formListStyleModule = inject('formListStyleModule');\n\n    const state = reactive({\n      isFocus: false,\n      isInputed: false,\n      val: '',\n      count: props.modelValue ? props.modelValue.length : 0,\n    });\n\n    const input = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const isBottom = computed(() => {\n      return Boolean(context.slots.bottom);\n    });\n\n    const getInputElement = () => {\n      return input.value;\n    };\n\n    const focus = () => {\n      input.value.focus();\n    };\n\n    const labelClick = () => {\n      focus();\n    };\n\n    const checkLength = () => {\n      const { maxlength } = props;\n\n      if (typeof maxlength !== 'number') return;\n\n      const val = input.value.value;\n\n      if (val.length > maxlength) {\n        input.value.value = val.substr(0, maxlength);\n\n        const eInput = new Event('input');\n        input.value.dispatchEvent(eInput);\n      }\n    };\n\n    const checkInputed = () => {\n      const length = input.value.value.length;\n      state.isInputed = length ? true : false;\n      state.count = length;\n    };\n\n    const onfocusin = () => {\n      clearTimeout(timer);\n      checkLength();\n      state.isFocus = true;\n      state.isInputed = input.value.value.length ? true : false;\n    };\n\n    const onfocusout = () => {\n      clearTimeout(timer);\n      checkLength();\n\n      timer = setTimeout(() => {\n        state.isFocus = false;\n        clearTimeout(timer);\n      }, 50);\n    };\n\n    const onInput = (e) => {\n      const { value } = e.target;\n      state.val = value;\n      emit('update:modelValue', value);\n    };\n\n    const onKeydown = () => {\n      checkLength();\n    };\n\n    const onKeyup = () => {\n      checkLength();\n      checkInputed();\n    };\n\n    onBeforeMount(() => {\n      state.val = props.modelValue || props.defaultValue || '';\n    });\n\n    onMounted(() => {\n      checkLength();\n      checkInputed();\n    });\n\n    onUpdated(() => {\n      checkLength();\n    });\n\n    watch(\n      () => props.modelValue,\n      (cur) => {\n        state.val = cur;\n\n        nextTick(() => {\n          checkInputed();\n        });\n      }\n    );\n\n    provide('formListItem', {\n      helpClass: formListStyleModule['form__help'],\n    });\n\n    provide('basicTextarea', {\n      helpClass: $style['input__help'],\n      invalidClass: $style['input__invalid'],\n    });\n\n    return {\n      formListStyleModule,\n      state,\n      input,\n      customClassNames,\n      isBottom,\n      getInputElement,\n      focus,\n      labelClick,\n      onfocusin,\n      onInput,\n      onKeydown,\n      onKeyup,\n      onfocusout,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      formListStyleModule['form__item'],\n      {\n        [formListStyleModule['form__item--focus']]: state.isFocus,\n        [formListStyleModule['form__item--inputed']]: state.isInputed,\n        [formListStyleModule['form__item--error']]: error,\n        [formListStyleModule['form__item--disabled']]: disabled,\n      },\n      $style['input'],\n      {\n        [$style['input--focus']]: state.isFocus,\n        [$style['input--inputed']]: state.isInputed,\n        [$style['input--error']]: error,\n        [$style['input--disabled']]: disabled,\n      },\n      customClassNames.item,\n    ]\"\n  >\n    <dt\n      :class=\"[\n        formListStyleModule['form__title'],\n        $style['input__title'],\n        customClassNames.title,\n      ]\"\n      @click=\"labelClick\"\n    >\n      <span\n        :class=\"[\n          formListStyleModule['form__title-text'],\n          customClassNames.titleText,\n        ]\"\n      >\n        {{ titleText }}\n      </span>\n      <span\n        v-if=\"titleOptionalText\"\n        :class=\"[\n          formListStyleModule['form__title-optional'],\n          customClassNames.titleOptionalText,\n        ]\"\n      >\n        {{ titleOptionalText }}\n      </span>\n      <span\n        v-if=\"require\"\n        :class=\"[\n          formListStyleModule['form__require'],\n          customClassNames.require,\n        ]\"\n      >\n        <span\n          :class=\"[\n            formListStyleModule['form__require-text'],\n            customClassNames.requireText,\n          ]\"\n        >\n          (필수)\n        </span>\n      </span>\n    </dt>\n    <dd\n      :class=\"[\n        formListStyleModule['form__contents'],\n        $style['input__contents'],\n        customClassNames.contents,\n      ]\"\n    >\n      <FormInvalid :error=\"error\">\n        <div :class=\"[$style['input__input'], customClassNames.input]\">\n          <textarea\n            ref=\"input\"\n            v-bind=\"$attrs\"\n            :value=\"modelValue || state.val\"\n            :disabled=\"disabled\"\n            @input=\"onInput\"\n            @focusin=\"onfocusin\"\n            @focusout=\"onfocusout\"\n            @keydown=\"onKeydown\"\n            @keyup=\"onKeyup\"\n          ></textarea>\n        </div>\n        <div\n          v-if=\"isBottom || count\"\n          :class=\"[$style['input__bottom'], customClassNames.bottom]\"\n        >\n          <div\n            v-if=\"isBottom\"\n            :class=\"[$style['input__bottom-left'], customClassNames.bottom]\"\n          >\n            <slot name=\"bottom\" />\n          </div>\n          <div\n            v-if=\"count\"\n            :class=\"[$style['input__count'], customClassNames.bottom]\"\n          >\n            <span\n              :class=\"[\n                $style['input__count-current'],\n                customClassNames.countCurrent,\n              ]\"\n              >{{ state.count }}</span\n            ><span v-if=\"maxlength\">/{{ maxlength }}</span>\n          </div>\n        </div>\n      </FormInvalid>\n    </dd>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/form/BasicTextarea.scss';\n</style>\n"],"names":["defaultClassNames","_sfc_main","FormInvalid","props","context","emit","timer","$style","useCssModule","formListStyleModule","inject","state","reactive","input","ref","customClassNames","computed","classNames","isBottom","getInputElement","focus","labelClick","checkLength","maxlength","val","eInput","checkInputed","length","onfocusin","onfocusout","onInput","e","value","onKeydown","onKeyup","onBeforeMount","onMounted","onUpdated","watch","cur","nextTick","provide","_createElementBlock","_normalizeClass","$setup","$props","_ctx","_createElementVNode","args","_createVNode","_component_FormInvalid","_mergeProps","_renderSlot","_toDisplayString","_hoisted_2"],"mappings":"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"}