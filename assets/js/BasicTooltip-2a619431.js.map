{"version":3,"file":"BasicTooltip-2a619431.js","sources":["../../../../src/components/ui/tooltip/BasicTooltip.vue"],"sourcesContent":["<script>\nimport {\n  computed,\n  ref,\n  reactive,\n  onMounted,\n  onBeforeUnmount,\n  nextTick,\n} from 'vue';\n\nconst defaultClassNames = () => ({\n  wrap: '',\n  button: '',\n  bubble: '',\n  tail: '',\n});\n\nexport default {\n  props: {\n    classNames: {\n      Type: Object,\n      default() {\n        return defaultClassNames();\n      },\n    },\n    placement: {\n      Type: String,\n      default: 'top',\n    },\n    type: {\n      Type: String,\n      default: null,\n    },\n  },\n  setup(props) {\n    let timer = null;\n\n    const state = reactive({\n      show: false,\n      top: 0,\n      tailLeft: 0,\n    });\n\n    const button = ref(null);\n    const bubble = ref(null);\n\n    const customClassNames = computed(() => {\n      const { classNames } = props;\n      return Object.assign(defaultClassNames(), classNames);\n    });\n\n    const setPosition = () => {\n      if (!state.show) return;\n\n      const { placement } = props;\n      const buttonEl = button.value;\n      const bubbleEl = bubble.value;\n      const width = buttonEl.offsetWidth;\n      const bubbleW = bubbleEl.offsetWidth;\n      const bubbleX = bubbleEl.offsetLeft;\n      const left = (() => {\n        let left = buttonEl.offsetLeft + width / 2 - bubbleX;\n        const max = bubbleW - 22;\n\n        if (props.type === 'popup') {\n          left = buttonEl.offsetLeft - 30 + width / 2;\n\n          if (left < 22) {\n            return 22;\n          } else if (left > max) {\n            return max;\n          } else {\n            return left;\n          }\n        } else {\n          return left;\n        }\n      })();\n\n      if (placement === 'bottom') {\n        state.top = 0;\n      } else {\n        state.top = buttonEl.offsetHeight + 12;\n      }\n\n      state.tailLeft = left;\n    };\n\n    const toggle = () => {\n      state.show = !state.show;\n\n      nextTick(() => {\n        setPosition();\n      });\n    };\n\n    const open = () => {\n      state.show = true;\n\n      nextTick(() => {\n        setPosition();\n      });\n    };\n\n    const close = () => {\n      state.show = false;\n\n      nextTick(() => {\n        setPosition();\n      });\n    };\n\n    const onFocusin = () => {\n      clearTimeout(timer);\n      open();\n    };\n\n    const onFocusout = () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        clearTimeout(timer);\n        close();\n      }, 50);\n    };\n\n    const onMouseenter = () => {\n      open();\n    };\n\n    const onMouseleave = () => {\n      close();\n    };\n\n    onMounted(() => {\n      setPosition();\n\n      window.addEventListener('resize', setPosition);\n      window.addEventListener('orientationchange', setPosition);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', setPosition);\n      window.removeEventListener('orientationchange', setPosition);\n    });\n\n    return {\n      state,\n      button,\n      bubble,\n      customClassNames,\n      toggle,\n      open,\n      close,\n      onFocusin,\n      onFocusout,\n      onMouseenter,\n      onMouseleave,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    :class=\"[\n      $style['tooltip'],\n      {\n        [$style['tooltip--bottom']]: placement === 'bottom',\n        [$style[`tooltip--type-${type}`]]: type,\n        'is-show': state.show,\n      },\n      customClassNames.wrap,\n    ]\"\n    tabindex=\"0\"\n    @focusin=\"onFocusin\"\n    @focusout=\"onFocusout\"\n    @mouseleave=\"onMouseleave\"\n  >\n    <div\n      ref=\"button\"\n      :class=\"[$style['tooltip__button'], customClassNames.button]\"\n      @mouseenter=\"onMouseenter\"\n    >\n      <slot />\n    </div>\n    <div\n      ref=\"bubble\"\n      :class=\"[$style['tooltip__bubble'], customClassNames.bubble]\"\n      :style=\"`margin-top: -${state.top}px;`\"\n    >\n      <div\n        :class=\"[$style['tooltip__tail'], customClassNames.tail]\"\n        :style=\"`left: ${state.tailLeft}px;`\"\n      />\n      <slot name=\"contents\" />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/assets/scss/components/ui/tooltip/BasicTooltip.scss';\n</style>\n"],"names":["defaultClassNames","_sfc_main","props","timer","state","reactive","button","ref","bubble","customClassNames","computed","classNames","setPosition","placement","buttonEl","bubbleEl","width","bubbleW","bubbleX","left","max","toggle","nextTick","open","close","onFocusin","onFocusout","onMouseenter","onMouseleave","onMounted","onBeforeUnmount","_createElementBlock","_normalizeClass","_ctx","$props","$setup","args","_createElementVNode","_renderSlot","_normalizeStyle"],"mappings":"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"}